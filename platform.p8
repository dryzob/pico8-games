pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- main loops

-- globals
gnd= 0x4



function _init()
	cls(0)
	palt()
	palt(2,true)
	
end
function _update()

	cplayer()
	uplayer()

end

function _draw()

	dmap()
	dplayer()

end

function dmap()
	map()
end


-->8
--helper functions

fu=0.3
grav=1

function friction(vect)
	vect.x=vect.x*fu
	if(vect.x<0.2) vect.x=0
	return vect
end

function gravity(vect)
	vect.y+=grav
	return vect
end
-->8
-- player

player={
	x=16,
	y=54,
	vel={x=0,y=0},
	maxv={x=3,y=4},
	sprite=1,
	inair=true,
	jump=2,
	spe=1
}

function dplayer()
	spr(1,player.x,player.y)
end

function cplayer()
	if(btn(⬅️))	player.vel.x-=player.spe
	if(btn(➡️))	player.vel.x+=player.spe
	if(btn(⬆️)) player.vel.y-=player.jump
end

function uplayer()
	-- colision
	tbel=fget(mget(player.x/8,player.y/8+3))
	print(tbel)
	
	if(tbel!=gnd) then
		player.inair=true
	else
		player.inair=false
	end
	
	--pos
	if player.vel.x > player.maxv.x then
		player.vel.x = player.maxv.x
	end
	if player.vel.y > player.maxv.y then
		player.vel.y = player.maxv.y
	end
	
	player.x+=player.vel.x
	player.y+=player.vel.y
	
	player.vel=friction(player.vel)
	if(player.inair) then
		player.vel=gravity(player.vel)
	end
	
end
__gfx__
00000000228888220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000228888820000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070022ffff220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000288181820000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000281616820000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700281111820000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000221221220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000224424420000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccccccccbbbbbbbb3333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccccccccbbbbbbbb3333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccccccccbbbbbbbb3333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
ccccccccbbbbbbbb3333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
cccccccc333333333333333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
888888888888888888888888888888888888888888888888888888888888888888888888888888888882282288882288228882228228888888ff888888228888
88888f8888888882282282288888888888888888888888888888888888888888888888888888888888228882288822222288822282288888ff8f888888222888
88888f888f8888888888888888888888888888888888888888888888888888888888888888888888882288822888282282888222888888ff888f888888288888
88888f888f8f88822822822888888888888888888888888888888888888888888888888888888888882288822888222222888888222888ff888f888822288888
88888f8f8f8f8888888888888888888888888888888888888888888888888888888888888888888888228882288882222888822822288888ff8f888222288888
88888f8f8f8f888228228228888888888888888888888888888888888888888888888888888888888882282288888288288882282228888888ff888222888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555550000000000005555555555555555555555555555550000000000005500000000000055555555555
555555e555566656665555e555555555555566566656655550666066000005555555555556555566556656665550666066600005506660666000055555555555
55555ee555565656565555ee5555555555565556565656555060600600000555555555555655565656565656555060606060000550606060600005555d555555
5555eee555565656565555eee55555555556665666565655506060060000055555555555565556565656566655506060606000055060606060000555d5d55555
55555ee555565656565555ee55555555555556565556565550606006000005555555555556555656565656555550606060600005506060606000055d555d5d55
555555e555566656665555e55555555555566556555666555066606660000555555555555666566556655655555066606660000550666066600005555555d555
55555555555555555555555555555555555555555555555550000000000005555555555555555555555555555550000000000005500000000000055555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555558888888856666666656666666656666666656666666656666666656666666656666666655555555555
555555ddd5ddd5ddd55dd5d5d5555555555555555555558887788856666676656666667756677777656666777656676666656676667656667766655555dd5555
555d55d5d55d555d55d555d5d555555555555555555555887887885666776765666677675667666765666676765676766665767676765667777665555d55d555
555555ddd55d555d55d555ddd555555555555555555555878888785677666765667766675667666765666676765766676765777777775677667765555d55d555
555d55d5555d555d55d555d5d5555555555555555555557888888757666666757766666757776667757777767757666776756767676757766667755555dd5555
555555d555ddd55d555dd5d5d5555555555555555555558888888856666666656666666656666666656666666656666666656766666756666666655555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000171000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000177100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000177710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000177771000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000177110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000011710000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000008800880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000008800110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000088001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000088001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000880011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000880011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000008800110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000008800110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000088001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000088001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000011001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000011001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000880011001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000880011001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000110011001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000110011001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000110011001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000110011001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000110011001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000110011001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000110011001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000110011001100110011001100110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
555555d5d55dd5d555d5d5ddd5ddd5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555d11d11dd555
555d55d5d5d5d5d555d5d5ddd5d555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555d11d11dd555
555555d5d5d5d5d555d5d5d5d5dd55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555d11d11dd555
555d55ddd5d5d5d555d5d5d5d5d555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555dd5dd5dd555
5555555d55dd55ddd55dd5d5d5ddd5555555555555555555555555555555555555555555555555555555555555555555555555555555555555555dd5dd5dd555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000eee0eee0eee0eee0eee0eee0eee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000eee0eee0eee0eee0eee0eee0eee0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
11100000000000000000000000000000111011101110111011101110111011101110111011101110111011101110111011101110111011101110111011101110
11100000000000000000000000000000111011101110111011101110111011101110111011101110111011101110111011101110111011101110111011101110
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
55555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555555
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888

__gff__
0001000000000000000000000000000008040400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1010101010101010101010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1111111111111111111111111111111100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212121212121212121212121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212121212121212121212121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212121212121212121212121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212121212121212121212121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1212121212121212121212121212121200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
00000000090500d0500e0500d0500b050080500b05010050140501c0501e0501b0501705007000070000b0000d000110001600017000150001200012000150001900020000260000000000000000000000000000
