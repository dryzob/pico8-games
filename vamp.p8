pico-8 cartridge // http://www.pico-8.com
version 42
__lua__
-- main functions

function _init()
	cls()
	palt(0, false)
	palt(3, true)
	-- later will have rng
end

function _update()
	uvamp()

end

function _draw()
	--cls()
	map()
	dvamp()
end

-->8
-- vampire

function dvamp()
	spr(vamp.sprite,vamp.x,vamp.y)
	
end

function uvamp()
	move(vamp)
	
	if btn(❎) then
		if hit(vamp.x-vamp.range,vamp.y-vamp.range,
						vamp.w+2*vamp.range,vamp.h+2*vamp.range,inct) then
			print("it worked")
		end
	end
	if btn(🅾️) then
		print("")
	end
end
-->8
-- gemeral functions

wall=0x99
inct=0x20

function hit(x,y,w,h,col)
	local collide=false
	
	for i=x,x+w do
		if((fget(mget(i/8,y/8))&col)==col)or
			((fget(mget(i/8,(y+h)/8))&col)==col)then
		 	collide=true
		end
	end
	
	for i=y,y+h do
  if((fget(mget(x/8,i/8))&col)==col)or
   ((fget(mget((x+w)/8,i/8))&col)==col)then
    collide=true
  end
 end
 return collide
end

function move(act)
	local dx=0
	local dy=0

	if(btn(⬅️)) dx -= act.spe
	if(btn(➡️)) dx += act.spe
	if(btn(⬆️)) dy -= act.spe
	if(btn(⬇️)) dy += act.spe
	
	-- colision
	if hit(act.x+dx,act.y,
					act.w,act.h,wall) then
		dx=0
	end
	if hit(act.x,act.y+dy,
					act.w,act.h,wall) then
		dy=0
	end
	
	act.x+=dx
	act.y+=dy
end
-->8
-- actors
vamp={
	x=0,
	y=0,
	w=5,
	h=7,
	spe=1,
	sprite=1,
	health=3,
	dmg=1,
	range=4
}

citizen={
	x=0,
	y=0,
	w=5,
	h=7,
	spe=1,
	sprite=2,
	health=4,
	val=1
}

doug={
	x=0,
	y=0,
	w=5,
	h=7,
	spe=1,
	health=4,
	sprite=3,
	hat1=18,
	hat2=19,
	mon=1,
}

cop={
	x=0,
	y=0,
	w=5,
	h=7,
	spe=1,
	sprite=4,
	health=8,
	dmg=2,
	val=2
}

mayor={
	x=0,
	y=0,
	w=5,
	h=7,
	spe=1,
	sprite=2,
	health=4,
	val=1
}
-->8
--objects
door={
	x=0,
	y=0,
	sprite={69,70},
	state=0
}

function ocdoor(x,y)

end
__gfx__
00000000656666563330033333333333000000008888588584444448800000080000000000000000000000000000000000000000000000000000000000000000
000000006666666633300333333003330000000088885885a4444444000000000000000000000000000000000000000000000000000000000000000000000000
007007006666666633300333330000330000000088885885a4444444000000000000000000000000000000000000000000000000000000000000000000000000
000770005666656633300333333a9333000000005555555544444aa4000000000000000000000000000000000000000000000000000000000000000000000000
0007700066666666333003333339a333000000008858888544444aa4000000000000000000000000000000000000000000000000000000000000000000000000
00700700665666663330033333300333000000008858888544444444000000000000000000000000000000000000000000000000000000000000000000000000
000000005666666633000033333003330000000088588885a4444444000000000000000000000000000000000000000000000000000000000000000000000000
000000006666666630000003333003330000000055555555a4444444000000000000000000000000000000000000000000000000000000000000000000000000
0000000066656666000000000000000000000000dddd1ddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000066666666000000000000000000000000dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000066666666000000000000000000000000dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000066666666000000000000000000000000dd1ddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000066656666000000000000000000000000dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000056666666000000000000000000000000dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000066666666000000000000000000000000dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000066666666000000000000000000000000dddddd1d00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
30000033344444337777773331116133e32233333000033300000000333333333333333333333333337333333300000333333333000000000000000000000000
07c7c3334f0f03333f0f0333340f03432e2222333cccc33300000000333333333333333333388333373377733008083333382333000000000000000000000000
377773333ffff3333f6663333f4ee4333f0f03330000003300000000333333333337933333388333733733373300003333382333000000000000000000000000
00686033111911337700073311111133224442333f2f23330000000033444433337aa93333878833777377733000000338888823000000000000000000000000
0008003311191133777077331111a133222422333ffff333000000003444444333aaa93338788883777733373000000338888823000000000000000000000000
70080733f1191f33f0aa0f33f6611f33f0090f33000c003300000000300aa00333aaa93338888823777777333000000333382333000000000000000000000000
3000033331111333377773333000033332222333f00c0f3300000000344aa443333a933333888233333333733300003333382333000000000000000000000000
30330333303303333033033331331333303303333033033300000000344444433333333333333333333333333303303333333333000000000000000000000000
00000000377773333377333300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000377773333777733300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000377773333777733300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000377773333777733300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000377773333777733300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000377773333777733300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000377773333777733300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000003aaaa3333777733300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000406020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000102020222020020000000000000000000000000000000000000000000000000
__map__
0101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0111110005050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010005151515050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000005151515050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000005151515050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000005050505050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
00000000081500c1500e150101501215013150131501415012150111500f1500d1500b15009150091500c1500f15013150161501b1501c1501d1501d1501d1501c15019150141500c15008150062000110000000
0008000015750267500f7502c750317501a750047501a75022750067503675026750167500b750237501e75018750237500f7500e75009750137502f750207501d75021750277501e7501b75016750117500a750
